<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Thông tin cá nhân</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">


<!-- Nội dung -->
<div class="container mt-5">
    <div class="card shadow p-4">
        <h3 class="text-center text-primary mb-3">Thông tin cá nhân</h3>

        <div class="mb-3">
            <strong>Họ và tên:</strong>
            <span th:text="${account.customerName}"></span>
        </div>
        <div class="mb-3">
            <strong>Email:</strong>
            <span th:text="${account.email}"></span>
        </div>
        <div class="mb-3">
            <strong>Số điện thoại:</strong>
            <span th:text="${account.phoneNumber}"></span>
        </div>
        <div class="mb-3">
            <strong>Vai trò:</strong>
            <span th:text="${account.role}"></span>
        </div>
        <div class="mb-3">
            <strong>Thứ hạng:</strong>
            <span th:text="${account.level}"></span>
        </div>

        <h5 class="mt-4">Danh sách thẻ của bạn</h5>
        <div class="mb-2">
            <a class="btn btn-warning btn-sm" href="/account/create-card">Create card</a>
        </div>
        <div class="list-group mb-3">
            <div class="list-group-item d-flex justify-content-between align-items-center" th:each="card : ${cards}">
                <div>
                    <span>
                        Số thẻ: <strong th:text="${card.cardNumber}"></strong>
                        - Loại thẻ: <span th:text="${card.cardType}"></span>
                        - Trạng thái: <span th:text="${card.status}"></span>
                        <span th:if="${card.cardType == 'CREDIT'}"> - Hạn mức: <span th:text="${#numbers.formatInteger(card.creditLimit, 3, 'POINT')}"></span> VND</span>
                        <span th:if="${card.cardType == 'DEBIT'}"> - Số dư: <span th:text="${#numbers.formatInteger(balance.availableBalance, 3, 'POINT')}"></span> VND</span>

                    </span>
                </div>
                <form th:if="${card.cardType == 'DEBIT'}" th:action="@{'/account/transfer/' + ${card.cardNumber}}" method="get">
                    <button class="btn btn-sm btn-outline-danger" type="submit">Chuyển khoản</button>
                </form>
                <form th:action="@{'/account/delete-card/' + ${card.cardId}}" method="post">
                    <button class="btn btn-sm btn-outline-danger" type="submit">Xóa</button>
                </form>
            </div>
            <div class="text-muted" th:if="${#lists.isEmpty(cards)}">Chưa có thẻ nào.</div>
        </div>
        <div class="mt-4">
            <form class="row g-2" th:action="@{/account/update}" method="post">
                <div class="col-md-4">
                    <input class="form-control" type="email" name="email" placeholder="Email mới (tùy chọn)" />
                </div>
                <div class="col-md-4">
                    <input class="form-control" type="text" name="phone" placeholder="SĐT mới (tùy chọn)" />
                </div>
                <div class="col-md-4">
                    <button class="btn btn-outline-primary" type="submit">Cập nhật thông tin</button>
                </div>
            </form>
            <form class="mt-3" th:action="@{/account/delete}" method="post" onsubmit="return confirm('Xóa tài khoản? Hành động không thể hoàn tác.');">
                <button class="btn btn-outline-danger">Xóa tài khoản</button>
            </form>
        </div>
        <div class="text-center">
            <a href="/bank" class="btn btn-secondary">Quay lại Trang chủ</a>
        </div>
    </div>
</div>

</body>
</html>
